{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "title": "Average Suicide Cases from Different Generations",
  "data": {"url": "https://ryan-khoo.github.io/assignment2/master.csv"},
  "mark": "area",
  "width": 750, "height": 300,
  "transform": [
    {
      "aggregate": [{"op": "average", "field": "suicides_no", "as": "suicides_avg"}],
      "groupby": ["generation", "year"]
    }
  ],

  "selection": {
    "generation_highlight":{
      "type": "multi",
      "fields": ["generation"],
      "bind": "legend"
    }
  },

  "encoding": {
    "x": {
      "field": "year", 
      "type": "temporal",
      "axis": {"format": "%Y"}
    },
    "y": {
      "field": "suicides_avg", 
      "type": "quantitative"},
    "color": {
      "field": "generation",
      "type": "nominal",
      "title": "Generations",
      "scale": {"scheme": "category20b"}
    },
    "tooltip": [
      {"field": "generation", "type": "nominal"},
      {"field": "suicides_avg", "type": "quantitative", "format": ".2f", "formatType": "number"}
    ],
    "opacity":{
      "condition": {"selection": "generation_highlight", "value": 0.95},
      "value": 0.4
    }
  }
}
